<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Recuerdos Musicales</title>
<style>
body {
    margin: 0;
    overflow: hidden;
    height: 100vh;
    width: 100vw;
    background: url('img/fondo.png') no-repeat center center;
    background-size: cover;
    font-family: 'Segoe UI', Arial, sans-serif;
}

canvas {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
}

#audioModal {
    position: fixed;
    top:0; left:0;
    width:100%; height:100%;
    display:flex;
    align-items:center;
    justify-content:center;
    background: rgba(0,0,0,0.85);
    z-index:50;
    flex-direction:column;
    text-align:center;
    padding:20px;
    box-sizing:border-box;
    display:none;
}

#audioModal p {
    font-size:22px;
    color:#ffccff;
    text-shadow:0 0 10px rgba(255,100,255,0.6);
    margin: 10px 0;
}

#audioModal audio {
    outline:none;
    width: 300px;
    border-radius:10px;
}
/* ===== FONDO MÁS PEQUEÑO EN CELULAR ===== */
@media (max-width: 900px) {

    body {
        background-size: contain;
        background-position: center top;
    }

}

</style>
</head>
<body>
<canvas id="canvas"></canvas>

<div id="audioModal">
    <p id="songTitle"></p>
    <audio id="songPlayer" controls autoplay></audio>
</div>

<script>
const canvas = document.getElementById('canvas');
const ctx = canvas.getContext('2d');
let width = window.innerWidth;
let height = window.innerHeight;
canvas.width = width;
canvas.height = height;

const songs = [
    {
        src:'sound/amorcompleto.mp3',
        title:'Amor Completo - Mon Laferte',
        cover:'logocancion/amorcompleto.png'
    },
    {
        src:'sound/alma.mp3',
        title:'Alma Dinamita - WOS',
        cover:'logocancion/almadinamita.png'
    },
    {
        src:'sound/Ican.mp3',
        title:'I Can See You - Taylor Swift',
        cover:'logocancion/Icanseeyou.png'
    },
    {
        src:'sound/arbol.mp3',
        title:'Árbol de Manzanas - Nsqk',
        cover:'logocancion/arbolmanzanas.png'
    },
    {
        src:'sound/carmin.mp3',
        title:'Carmín - Zoé',
        cover:'logocancion/carmin.png'
    },
    {
        src:'sound/decirte.mp3',
        title:'Decirte lo Que Siento - Soy Luna',
        cover:'logocancion/soyluna.png'
    },
    {
        src:'sound/Laluna.mp3',
        title:'La Luna - Josean Log',
        cover:'logocancion/luna.png'
    },
    {
        src:'sound/mitad.mp3',
        title:'Mitad y Mitad - Soy Luna',
        cover:'logocancion/soyluna.png'
    },
    {
        src:'sound/reina.mp3',
        title:'Reina Pepiada - Álvaro Díaz',
        cover:'logocancion/reinapepiada.png'
    },
    {
        src:'sound/soñe.mp3',
        title:'Soñé - Zoé',
        cover:'logocancion/soñe.png'
    },
    {
        src:'sound/Tonos.mp3',
        title:'Tonos de Azul - Nsqk',
        cover:'logocancion/tonosazul.png'
    },
    {
        src:'sound/yoko.mp3',
        title:'Yoko - Álvaro Díaz',
        cover:'logocancion/yoko.png'
    }
];




let floatingObjects = [];
let imagesLoaded = 0;

class FloatingObject {
    constructor(imgSrc, song){
        this.img = new Image();
        this.img.src = imgSrc;
        this.img.onload = ()=>{imagesLoaded++;}
        this.song = song;
        this.size = 50 + Math.random()*30;
        this.x = Math.random()*width;
        this.y = -Math.random()*300;
        this.speedY = 0.5 + Math.random()*1.5;
        this.speedX = Math.random()*0.5 - 0.25;
        this.angle = Math.random()*Math.PI*2;
        this.rotationSpeed = Math.random()*0.02 - 0.01;
    }
    draw(){
        this.x += this.speedX;
        this.y += this.speedY;
        this.angle += this.rotationSpeed;
        if(this.y>height+50){ this.y=-50; this.x=Math.random()*width; }
        ctx.save();
        ctx.translate(this.x,this.y);
        ctx.rotate(this.angle);
        ctx.drawImage(this.img,-this.size/2,-this.size/2,this.size,this.size);
        ctx.restore();
    }
    isClicked(mx,my){
        return mx>this.x-this.size/2 && mx<this.x+this.size/2 &&
               my>this.y-this.size/2 && my<this.y+this.size/2;
    }
}

// Crear los objetos flotantes usando las portadas reales
songs.forEach(song=>{
    floatingObjects.push(new FloatingObject(song.cover, song));
});


// Animación
function animate(){
    ctx.clearRect(0,0,width,height);
    floatingObjects.forEach(obj=>{
        if(obj.img.complete){
            obj.draw();
        }
    });
    requestAnimationFrame(animate);
}
animate();

// Clic en objetos
canvas.addEventListener('click',(e)=>{
    const rect = canvas.getBoundingClientRect();
    const mx = e.clientX - rect.left;
    const my = e.clientY - rect.top;
    for(let obj of floatingObjects){
        if(obj.isClicked(mx,my)){
            showAudio(obj.song);
            break;
        }
    }
});

// Modal de música
const audioModal = document.getElementById('audioModal');
const songPlayer = document.getElementById('songPlayer');
const songTitle = document.getElementById('songTitle');

function showAudio(song){
    audioModal.style.display = 'flex';
    songTitle.textContent = song.title;
    songPlayer.src = song.src;
    songPlayer.play();
}

audioModal.addEventListener('click',()=>{
    songPlayer.pause();
    audioModal.style.display = 'none';
});

window.addEventListener('resize',()=>{
    width = window.innerWidth;
    height = window.innerHeight;
    canvas.width = width;
    canvas.height = height;
});
</script>
</body>
</html>
